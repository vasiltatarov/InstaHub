<!--@using System.Linq
@using MyForum.Common
@model PagedList.IPagedList<MyForum.Web.ViewModels.Posts.PostViewModel>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@this.ViewData["Title"] - @GlobalConstants.SystemName</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" asp-append-version="true" />
    <link href="~/css/home.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/site.min.css" asp-append-version="true" />

    <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />

    <link href="~/lib/fontawesome/css/all.css" rel="stylesheet" asp-append-version="true" />
</head>
<body style="background: aliceblue">
    <div>
        <form method="get" asp-action="Posts">
            <div class="inner-main-header m-2" style="border: 1px solid; border-radius: 25px;">
                <select id="searchFor" name="searchFor">
                    <option value="latest" selected="">Latest</option>
                    <option value="earliest">Earlier</option>
                    <option value="mostVisited">Most Visited</option>
                    <option value="mostLiked">Most Liked</option>
                </select>
                <span class="ml-auto w-auto">
                    Results: @this.Model.Count()
                </span>
                <span class="ml-auto w-auto">
                    <input type="search" name="searchTerm" class="form-control form-control shadow-none mb-4 mt-4" placeholder="Search forum" />
                </span>
                <span class="ml-2">
                    <button type="submit" class="fas fa-search btn btn-primary form-control"></button>
                </span>
            </div>
        </form>
    </div>
    <hr />
    @foreach (var post in this.Model)
    {
        <div class="card mb-2"  style="border: 1px solid; border-radius: 25px;">
            <div class="card-body p-2 p-sm-3">
                <div class="media">
                    <a asp-controller="ViewUserProfile" asp-action="ByUsername" asp-route-username="@post.UserUserName">
                        <img src="~/uploads/@post.UserImagePath" style="width: 70px; height: 70px;" class="mr-3 rounded-circle" alt="User" />
                    </a>
                    <div class="media-body">
                        <h6>
                            <a asp-controller="Posts" asp-action="ById" asp-route-id="@post.Id">
                                @post.Title
                            </a>
                        </h6>
                        <p class="text-secondary">
                            @post.ShortContent
                        </p>
                        <p class="text-muted">
                            <span class="text-secondary font-weight-bold">
                                Post author: @post.UserUserName
                            </span>
                            <span class="text-secondary font-weight-bold float-right">
                                Published @((DateTime.Now - post.CreatedOn).Days) days ago
                            </span>
                        </p>
                    </div>
                    <div class="text-muted small text-center align-self-center">
                        <span class="d-none d-sm-inline-block">
                            <i class="fas fa-thumbs-up"></i> @post.VotesCount
                        </span>
                        <span>
                            <i class="far fa-comment ml-2"></i> @post.Comments.Count()
                        </span>
                        <span>
                            <i class="far fa-eye ml-2"></i> @post.VisitorsCount
                        </span>
                    </div>
                </div>
            </div>
        </div>
    }
    <hr />-->
    @*Pagination*@
    <!--<nav>
        <ul class="pagination pagination pagination justify-content-center">
            @if (this.Model.PageNumber == 1)
            {
                <li class="page-item disabled">
                    <a class="page-link" href="#">
                        <i class="fas fa-angle-double-left"></i>
                    </a>
                </li>
            }
            else
            {
                <li class="page-item">
                    <a class="page-link" asp-action="Posts" asp-route-page="@(this.Model.PageNumber - 1)">
                        <i class="fas fa-angle-double-left"></i>
                    </a>
                </li>
            }

            @for (int i = 1; i <= this.Model.PageCount; i++)
            {
                var active = i == this.Model.PageNumber ? " active" : string.Empty;
                <li class="page-item @active">
                    <a class="page-link" asp-action="Posts" asp-route-page="@i">@i</a>
                </li>
            }

            @if (this.Model.PageNumber == this.Model.PageCount)
            {
                <li class="page-item disabled">
                    <a class="page-link" href="#">
                        <i class="fas fa-angle-double-right"></i>
                    </a>
                </li>
            }
            else
            {
                <li class="page-item">
                    <a class="page-link" asp-action="Posts" asp-route-page="@(this.Model.PageNumber + 1)">
                        <i class="fas fa-angle-double-right"></i>
                    </a>
                </li>
            }
        </ul>
    </nav>
</body>-->
